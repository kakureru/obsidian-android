#android 

![[Запуск приложения.png]]

При запуске любого приложения, происходит начальная загрузка Zygote, загрузка классов в JVM. JVM находит метод main() в классе ActivityThread. Затем он вызывает main(), после чего ядро передает управление вашему приложению.

### Класс ActivityThread

Итак, мы нашли точку входа — ActivityThread. Давайте рассмотрим, что делает этот класс и связанный с ним метод main:
1. Подготавливает Main[[Looper ]](2-3)  
    Текущий случайный поток, который выполняет всю работу по вызову метода main() отмечается в качестве основного потока приложений. Именно здесь определяется [[MainThread]] для приложения в Android!  
2. Настройка [[Handler]]'a (4-5)  
3. Вызов метода Looper.loop() в MainThread (6-7)  
    После назначения MainThread в этом же главном потоке, для того чтоб мы могли в нем что-то выполнять, запускается выполнение сообщений в MessageQueue. MessageQueue заполняется Handler'ом, он же и обрабатывает сообщения. Теперь MainThread запущен и может начать обработку задач из очереди.    

![[Loper Handler.png]]

### Запуск MainActivity
 
На данный момент, у нас есть Looper, передающий сообщения Handler'у. Handler производит обработку входящего сообщения по его содержимому.  
Один из случаев включает в себя запуск активности. В case LAUNCH_ACTIVITY создаётся объект Activity. Затем в неё добавляется важная информация, такая как Instrumentation, Context, Component, а также Intent; а также задается Application. Затем наконец вызывается onCreate() в Activity.