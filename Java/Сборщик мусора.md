#java

Сборщик мусора Garbage Collector выполняет всего две задачи, связанные с поиском мусора и его очисткой. Для обнаружения мусора существует два подхода:

### Учет ссылок

Суть подхода связана с тем, что каждый объект имеет счетчик, который хранит информацию о количестве указывающих на него ссылок. При уничтожении ссылки счетчик уменьшается. При нулевом значении счетчика объект можно считать мусором.

Главным недостатком данного подхода является сложность обеспечения точности счетчика и «невозможность» выявлять циклические зависимости. Так, например, два объекта могут ссылаться друг на друга, но ни на один из них нет внешней ссылки. Это сопровождается утечками памяти. В этой связи данный подход не получил распространения.

#### Трассировка

Главная идея связана с тем, что до «живого» объекта можно добраться из корневых точек (GC Root). Всё, что доступно из «живого» объекта, также является «живым». Если представить все объекты и ссылки между ними как дерево, то необходимо пройти от корневых узлов GC Roots по всем узлам. При этом узлы, до которых нельзя добраться, являются мусором.

![](https://java-online.ru/images/basic/garbage-collection1.png)

Данный подход, обеспечивающий выявление циклических ссылок, используется в виртуальной машине HotSpot VM. Теперь, осталось понять, а что представляет из себя корневая точка (GC Root)? «Источники» говорят, что существуют следующие типы корневых точек :
-   Основной Java поток.
-   Локальные переменные в основном методе.
-   Статические переменные основного класса.

Таким образом, простое java-приложение будет иметь следующие корневые точки:
-   Параметры main метода и локальные переменные внутри main метода.
-   Поток, который выполняет main.
-   Статические переменные основного класса, внутри которого находится main метод.

Решение об освобождении памяти он принимает исходя из типа имеющихся на объект [[Ссылки в Java|ссылок]]